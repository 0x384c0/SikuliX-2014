#!/bin/sh
base=`pwd`
echo -
echo ---
echo ----- SikuliX collecting jars in $base

source=$base/APIFat/target

dist=$base/../SikuliX-Setup
if [ -e $dist ]; then
  rm -f -R $dist
fi
mkdir $dist
mkdir $dist/Downloads

log=$dist/collectjars-log.txt

# ----------- Setup
echo ----- collecting jars
echo --- collecting jars >>$log
cd $source >>$log
apijar=`ls *-plain.jar`
java -jar $api noSetup >>$log
cd $base
ls -l $source >>$log
ls -l $source/Downloads >>$log

# ----------- Setup
echo ----- copy Setup
echo --- copy Setup >>$log
cp $source/$api $dist/sikulixsetup.jar

# ----------- Jars
echo ----- copy Jars
echo --- copy Jars >>$log
cp $source/Downloads/* $dist/Downloads

echo ----------- final content of $dist
ls -l $dist
ls -l $dist >>$log
ls -l $dist/Downloads
ls -l $dist/Downloads >>$log
echo ----------- SikuliX collectjars end -----------
echo -
echo --
echo ----
echo ------
echo -------- Looks like success -----------
echo check the logfile to be sure
echo $log
echo Now you can move the folder to where you want
echo and name it as you like
echo and run setup, to get your wanted packages.
echo !! BE SURE, not to download anything !!
echo !! You are doing an offline setup !!
echo ---------------------------------------------
